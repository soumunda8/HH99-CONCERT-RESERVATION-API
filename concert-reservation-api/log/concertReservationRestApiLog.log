2024-10-25 04:28:06.463 INFO  [Test worker] [o.s.t.c.s.AnnotationConfigContextLoaderUtils] - Could not detect default configuration classes for test class [io.hhplus.concert.application.user.PointRechargeConcurrencyFailureTest]: PointRechargeConcurrencyFailureTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-25 04:28:06.581 INFO  [Test worker] [o.s.b.t.c.SpringBootTestContextBootstrapper] - Found @SpringBootConfiguration io.hhplus.concert.ConcertReservationApiApplication for test class io.hhplus.concert.application.user.PointRechargeConcurrencyFailureTest
2024-10-25 04:28:46.170 INFO  [Test worker] [o.s.t.c.s.AnnotationConfigContextLoaderUtils] - Could not detect default configuration classes for test class [io.hhplus.concert.application.user.PointRechargeConcurrencyFailureTest]: PointRechargeConcurrencyFailureTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-25 04:28:46.326 INFO  [Test worker] [o.s.b.t.c.SpringBootTestContextBootstrapper] - Found @SpringBootConfiguration io.hhplus.concert.ConcertReservationApiApplication for test class io.hhplus.concert.application.user.PointRechargeConcurrencyFailureTest
2024-10-25 04:28:46.756 INFO  [background-preinit] [o.h.validator.internal.util.Version] - HV000001: Hibernate Validator 8.0.1.Final
2024-10-25 04:28:46.788 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyFailureTest] - Starting PointRechargeConcurrencyFailureTest using Java 17.0.7 with PID 13472 (started by soumu in C:\Dev\HH99\scenarioProject\concert-reservation-api)
2024-10-25 04:28:46.789 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyFailureTest] - No active profile set, falling back to 1 default profile: "default"
2024-10-25 04:28:47.785 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-25 04:28:47.885 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 94 ms. Found 7 JPA repository interfaces.
2024-10-25 04:28:48.544 INFO  [Test worker] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-25 04:28:48.629 INFO  [Test worker] [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.4.10.Final
2024-10-25 04:28:48.686 INFO  [Test worker] [o.h.c.internal.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2024-10-25 04:28:49.011 INFO  [Test worker] [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-25 04:28:49.050 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2024-10-25 04:28:49.170 INFO  [Test worker] [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@2b8cf049
2024-10-25 04:28:49.172 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2024-10-25 04:28:49.201 WARN  [Test worker] [org.hibernate.orm.deprecation] - HHH90000025: MariaDBDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-25 04:28:50.295 INFO  [Test worker] [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-25 04:28:50.349 INFO  [Test worker] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:28:50.888 INFO  [Test worker] [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-25 04:28:51.859 WARN  [Test worker] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-25 04:28:52.544 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyFailureTest] - Started PointRechargeConcurrencyFailureTest in 6.055 seconds (process running for 7.547)
2024-10-25 04:28:52.550 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Starting scheduled task to check and update reservation statuses
2024-10-25 04:28:52.565 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Checking for expired reservations to update.
2024-10-25 04:28:52.667 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Expired reservations update process completed.
2024-10-25 04:28:52.670 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Reservation status update completed successfully
2024-10-25 04:28:52.671 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Starting UserQueueScheduler execution
2024-10-25 04:28:52.672 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Expiring user queues
2024-10-25 04:28:52.672 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expiring user queues.
2024-10-25 04:28:52.683 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expired queues processed.
2024-10-25 04:28:52.684 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - User queues expired successfully
2024-10-25 04:28:52.684 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Activating standby users
2024-10-25 04:28:52.684 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Activating standby users.
2024-10-25 04:28:52.692 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Standby users activated.
2024-10-25 04:28:52.694 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Standby users activated successfully
2024-10-25 04:28:52.694 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - UserQueueScheduler execution completed
2024-10-25 04:28:53.333 INFO  [Test worker] [i.h.concert.application.user.UserService] - Adding new user with userId: testUser
2024-10-25 04:28:53.377 INFO  [Test worker] [i.h.concert.application.user.UserService] - User added successfully with userId: testUser
2024-10-25 04:28:53.377 INFO  [Test worker] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 1000
2024-10-25 04:28:53.379 INFO  [Test worker] [i.h.concert.application.user.UserService] - Recharge points updated for userId: testUser
2024-10-25 04:28:53.380 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:28:53.430 INFO  [pool-2-thread-2] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.430 INFO  [pool-2-thread-5] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.430 INFO  [pool-2-thread-6] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.439 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Updating use points for userId: testUser, amount: 1500
2024-10-25 04:28:53.439 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:28:53.441 INFO  [pool-2-thread-9] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.441 INFO  [pool-2-thread-8] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.441 INFO  [pool-2-thread-10] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.441 INFO  [pool-2-thread-4] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.441 INFO  [pool-2-thread-7] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:28:53.441 INFO  [pool-2-thread-3] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:29:23.501 WARN  [pool-2-thread-1] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 0, SQLState: null
2024-10-25 04:29:23.501 ERROR [pool-2-thread-1] [o.h.engine.jdbc.spi.SqlExceptionHelper] - HikariPool-1 - Connection is not available, request timed out after 30014ms.
2024-10-25 04:29:43.437 WARN  [pool-2-thread-5] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.437 WARN  [pool-2-thread-6] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.437 WARN  [pool-2-thread-2] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.439 WARN  [pool-2-thread-5] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.439 WARN  [pool-2-thread-2] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.439 WARN  [pool-2-thread-6] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.440 ERROR [pool-2-thread-5] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=696) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.440 ERROR [pool-2-thread-2] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=695) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.440 ERROR [pool-2-thread-6] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=697) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.623 WARN  [pool-2-thread-4] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.624 WARN  [pool-2-thread-4] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.625 ERROR [pool-2-thread-4] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=701) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.779 WARN  [pool-2-thread-9] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.781 WARN  [pool-2-thread-9] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.782 ERROR [pool-2-thread-9] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=699) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.921 WARN  [pool-2-thread-8] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:43.921 WARN  [pool-2-thread-8] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:43.921 ERROR [pool-2-thread-8] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=700) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.091 WARN  [pool-2-thread-10] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.092 WARN  [pool-2-thread-10] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:44.092 ERROR [pool-2-thread-10] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=698) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.245 WARN  [pool-2-thread-3] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.246 WARN  [pool-2-thread-3] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:44.246 ERROR [pool-2-thread-3] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=703) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.401 WARN  [pool-2-thread-7] [o.m.jdbc.message.server.ErrorPacket] - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.402 WARN  [pool-2-thread-7] [o.h.engine.jdbc.spi.SqlExceptionHelper] - SQL Error: 1205, SQLState: HY000
2024-10-25 04:29:44.402 ERROR [pool-2-thread-7] [o.h.engine.jdbc.spi.SqlExceptionHelper] - (conn=702) Lock wait timeout exceeded; try restarting transaction
2024-10-25 04:29:44.405 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:29:44.584 INFO  [SpringApplicationShutdownHook] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:29:44.586 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2024-10-25 04:29:44.592 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2024-10-25 04:41:30.154 INFO  [Test worker] [o.s.t.c.s.AnnotationConfigContextLoaderUtils] - Could not detect default configuration classes for test class [io.hhplus.concert.application.user.PointRechargeConcurrencyTest]: PointRechargeConcurrencyTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-25 04:41:30.263 INFO  [Test worker] [o.s.b.t.c.SpringBootTestContextBootstrapper] - Found @SpringBootConfiguration io.hhplus.concert.ConcertReservationApiApplication for test class io.hhplus.concert.application.user.PointRechargeConcurrencyTest
2024-10-25 04:41:30.611 INFO  [background-preinit] [o.h.validator.internal.util.Version] - HV000001: Hibernate Validator 8.0.1.Final
2024-10-25 04:41:30.638 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Starting PointRechargeConcurrencyTest using Java 17.0.7 with PID 26124 (started by soumu in C:\Dev\HH99\scenarioProject\concert-reservation-api)
2024-10-25 04:41:30.640 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - No active profile set, falling back to 1 default profile: "default"
2024-10-25 04:41:31.471 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-25 04:41:31.556 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 78 ms. Found 7 JPA repository interfaces.
2024-10-25 04:41:32.065 INFO  [Test worker] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-25 04:41:32.130 INFO  [Test worker] [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.4.10.Final
2024-10-25 04:41:32.168 INFO  [Test worker] [o.h.c.internal.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2024-10-25 04:41:32.427 INFO  [Test worker] [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-25 04:41:32.457 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2024-10-25 04:41:32.552 INFO  [Test worker] [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@46994f26
2024-10-25 04:41:32.555 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2024-10-25 04:41:32.581 WARN  [Test worker] [org.hibernate.orm.deprecation] - HHH90000025: MariaDBDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-25 04:41:33.445 INFO  [Test worker] [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-25 04:41:33.491 INFO  [Test worker] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:41:33.930 INFO  [Test worker] [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-25 04:41:34.644 WARN  [Test worker] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-25 04:41:35.128 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Starting scheduled task to check and update reservation statuses
2024-10-25 04:41:35.132 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Started PointRechargeConcurrencyTest in 4.729 seconds (process running for 5.991)
2024-10-25 04:41:35.137 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Checking for expired reservations to update.
2024-10-25 04:41:35.212 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Expired reservations update process completed.
2024-10-25 04:41:35.215 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Reservation status update completed successfully
2024-10-25 04:41:35.216 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Starting UserQueueScheduler execution
2024-10-25 04:41:35.216 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Expiring user queues
2024-10-25 04:41:35.217 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expiring user queues.
2024-10-25 04:41:35.223 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expired queues processed.
2024-10-25 04:41:35.225 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - User queues expired successfully
2024-10-25 04:41:35.225 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Activating standby users
2024-10-25 04:41:35.225 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Activating standby users.
2024-10-25 04:41:35.228 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Standby users activated.
2024-10-25 04:41:35.230 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Standby users activated successfully
2024-10-25 04:41:35.230 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - UserQueueScheduler execution completed
2024-10-25 04:41:35.706 INFO  [Test worker] [i.h.concert.application.user.UserService] - Adding new user with userId: testUser
2024-10-25 04:41:35.753 INFO  [Test worker] [i.h.concert.application.user.UserService] - User added successfully with userId: testUser
2024-10-25 04:41:35.753 INFO  [Test worker] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 1000
2024-10-25 04:41:35.783 INFO  [Test worker] [i.h.concert.application.user.UserService] - Recharge points updated for userId: testUser
2024-10-25 04:41:35.783 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:41:35.802 INFO  [pool-2-thread-2] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.802 INFO  [pool-2-thread-5] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.804 INFO  [pool-2-thread-9] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.804 INFO  [pool-2-thread-10] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.804 INFO  [pool-2-thread-3] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.805 INFO  [pool-2-thread-4] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.806 INFO  [pool-2-thread-7] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.807 INFO  [pool-2-thread-8] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.807 INFO  [pool-2-thread-6] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:41:35.811 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Updating use points for userId: testUser, amount: 1500
2024-10-25 04:41:35.811 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:41:35.840 ERROR [pool-2-thread-1] [i.h.concert.application.user.UserService] - User info not found for userId: testUser
2024-10-25 04:41:35.843 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:41:35.962 INFO  [SpringApplicationShutdownHook] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:41:35.967 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2024-10-25 04:41:36.093 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2024-10-25 04:42:48.042 INFO  [Test worker] [o.s.t.c.s.AnnotationConfigContextLoaderUtils] - Could not detect default configuration classes for test class [io.hhplus.concert.application.user.PointRechargeConcurrencyTest]: PointRechargeConcurrencyTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-25 04:42:48.149 INFO  [Test worker] [o.s.b.t.c.SpringBootTestContextBootstrapper] - Found @SpringBootConfiguration io.hhplus.concert.ConcertReservationApiApplication for test class io.hhplus.concert.application.user.PointRechargeConcurrencyTest
2024-10-25 04:42:48.505 INFO  [background-preinit] [o.h.validator.internal.util.Version] - HV000001: Hibernate Validator 8.0.1.Final
2024-10-25 04:42:48.532 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Starting PointRechargeConcurrencyTest using Java 17.0.7 with PID 17484 (started by soumu in C:\Dev\HH99\scenarioProject\concert-reservation-api)
2024-10-25 04:42:48.533 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - No active profile set, falling back to 1 default profile: "default"
2024-10-25 04:42:49.353 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-25 04:42:49.436 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 76 ms. Found 7 JPA repository interfaces.
2024-10-25 04:42:49.943 INFO  [Test worker] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-25 04:42:50.001 INFO  [Test worker] [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.4.10.Final
2024-10-25 04:42:50.045 INFO  [Test worker] [o.h.c.internal.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2024-10-25 04:42:50.301 INFO  [Test worker] [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-25 04:42:50.335 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2024-10-25 04:42:50.448 INFO  [Test worker] [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@4b50c21
2024-10-25 04:42:50.450 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2024-10-25 04:42:50.476 WARN  [Test worker] [org.hibernate.orm.deprecation] - HHH90000025: MariaDBDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-25 04:42:51.523 INFO  [Test worker] [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-25 04:42:51.578 INFO  [Test worker] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:42:52.106 INFO  [Test worker] [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-25 04:42:53.050 WARN  [Test worker] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-25 04:42:53.617 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Starting scheduled task to check and update reservation statuses
2024-10-25 04:42:53.620 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Started PointRechargeConcurrencyTest in 5.333 seconds (process running for 6.634)
2024-10-25 04:42:53.628 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Checking for expired reservations to update.
2024-10-25 04:42:53.704 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Expired reservations update process completed.
2024-10-25 04:42:53.706 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Reservation status update completed successfully
2024-10-25 04:42:53.707 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Starting UserQueueScheduler execution
2024-10-25 04:42:53.708 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Expiring user queues
2024-10-25 04:42:53.708 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expiring user queues.
2024-10-25 04:42:53.717 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expired queues processed.
2024-10-25 04:42:53.718 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - User queues expired successfully
2024-10-25 04:42:53.719 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Activating standby users
2024-10-25 04:42:53.719 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Activating standby users.
2024-10-25 04:42:53.723 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Standby users activated.
2024-10-25 04:42:53.723 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Standby users activated successfully
2024-10-25 04:42:53.724 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - UserQueueScheduler execution completed
2024-10-25 04:42:54.232 INFO  [Test worker] [i.h.concert.application.user.UserService] - Adding new user with userId: testUser
2024-10-25 04:42:54.267 INFO  [Test worker] [i.h.concert.application.user.UserService] - User added successfully with userId: testUser
2024-10-25 04:42:54.267 INFO  [Test worker] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 1000
2024-10-25 04:42:54.295 INFO  [Test worker] [i.h.concert.application.user.UserService] - Recharge points updated for userId: testUser
2024-10-25 04:42:54.296 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:42:54.314 INFO  [pool-2-thread-3] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.314 INFO  [pool-2-thread-4] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.314 INFO  [pool-2-thread-2] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.315 INFO  [pool-2-thread-5] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.315 INFO  [pool-2-thread-8] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.315 INFO  [pool-2-thread-6] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.315 INFO  [pool-2-thread-7] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.316 INFO  [pool-2-thread-10] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.320 INFO  [pool-2-thread-9] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:42:54.324 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Updating use points for userId: testUser, amount: 1500
2024-10-25 04:42:54.324 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:42:54.344 ERROR [pool-2-thread-1] [i.h.concert.application.user.UserService] - User info not found for userId: testUser
2024-10-25 04:42:54.347 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:42:54.450 INFO  [SpringApplicationShutdownHook] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:42:54.452 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2024-10-25 04:42:54.455 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2024-10-25 04:45:25.843 INFO  [Test worker] [o.s.t.c.s.AnnotationConfigContextLoaderUtils] - Could not detect default configuration classes for test class [io.hhplus.concert.application.user.PointRechargeConcurrencyTest]: PointRechargeConcurrencyTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-25 04:45:25.955 INFO  [Test worker] [o.s.b.t.c.SpringBootTestContextBootstrapper] - Found @SpringBootConfiguration io.hhplus.concert.ConcertReservationApiApplication for test class io.hhplus.concert.application.user.PointRechargeConcurrencyTest
2024-10-25 04:45:26.311 INFO  [background-preinit] [o.h.validator.internal.util.Version] - HV000001: Hibernate Validator 8.0.1.Final
2024-10-25 04:45:26.345 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Starting PointRechargeConcurrencyTest using Java 17.0.7 with PID 18536 (started by soumu in C:\Dev\HH99\scenarioProject\concert-reservation-api)
2024-10-25 04:45:26.346 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - No active profile set, falling back to 1 default profile: "default"
2024-10-25 04:45:27.177 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-25 04:45:27.264 INFO  [Test worker] [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 80 ms. Found 7 JPA repository interfaces.
2024-10-25 04:45:27.781 INFO  [Test worker] [o.hibernate.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-25 04:45:27.847 INFO  [Test worker] [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.4.10.Final
2024-10-25 04:45:27.888 INFO  [Test worker] [o.h.c.internal.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2024-10-25 04:45:28.146 INFO  [Test worker] [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-25 04:45:28.178 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2024-10-25 04:45:28.277 INFO  [Test worker] [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@3593e074
2024-10-25 04:45:28.279 INFO  [Test worker] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2024-10-25 04:45:28.305 WARN  [Test worker] [org.hibernate.orm.deprecation] - HHH90000025: MariaDBDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-25 04:45:29.247 INFO  [Test worker] [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-25 04:45:29.297 INFO  [Test worker] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:45:29.728 INFO  [Test worker] [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-10-25 04:45:30.507 WARN  [Test worker] [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-25 04:45:31.009 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Starting scheduled task to check and update reservation statuses
2024-10-25 04:45:31.009 INFO  [Test worker] [i.h.c.a.u.PointRechargeConcurrencyTest] - Started PointRechargeConcurrencyTest in 4.912 seconds (process running for 6.27)
2024-10-25 04:45:31.021 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Checking for expired reservations to update.
2024-10-25 04:45:31.110 INFO  [scheduling-1] [i.h.c.a.reservation.ReservationService] - Expired reservations update process completed.
2024-10-25 04:45:31.112 INFO  [scheduling-1] [i.h.c.a.r.s.ReservationStatusScheduler] - Reservation status update completed successfully
2024-10-25 04:45:31.114 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Starting UserQueueScheduler execution
2024-10-25 04:45:31.114 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Expiring user queues
2024-10-25 04:45:31.114 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expiring user queues.
2024-10-25 04:45:31.121 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Expired queues processed.
2024-10-25 04:45:31.121 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - User queues expired successfully
2024-10-25 04:45:31.121 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Activating standby users
2024-10-25 04:45:31.123 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Activating standby users.
2024-10-25 04:45:31.127 INFO  [scheduling-1] [i.h.c.application.user.UserQueueService] - Standby users activated.
2024-10-25 04:45:31.128 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - Standby users activated successfully
2024-10-25 04:45:31.129 INFO  [scheduling-1] [i.h.c.a.u.scheduler.UserQueueScheduler] - UserQueueScheduler execution completed
2024-10-25 04:45:31.632 INFO  [Test worker] [i.h.concert.application.user.UserService] - Adding new user with userId: testUser
2024-10-25 04:45:31.676 INFO  [Test worker] [i.h.concert.application.user.UserService] - User added successfully with userId: testUser
2024-10-25 04:45:31.676 INFO  [Test worker] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 1000
2024-10-25 04:45:31.703 INFO  [Test worker] [i.h.concert.application.user.UserService] - Recharge points updated for userId: testUser
2024-10-25 04:45:31.703 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:45:31.721 INFO  [pool-2-thread-2] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.722 INFO  [pool-2-thread-5] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.721 INFO  [pool-2-thread-6] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.721 INFO  [pool-2-thread-4] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.723 INFO  [pool-2-thread-10] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.723 INFO  [pool-2-thread-9] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.724 INFO  [pool-2-thread-3] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.724 INFO  [pool-2-thread-7] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.727 INFO  [pool-2-thread-8] [i.h.concert.application.user.UserService] - Updating recharge points for userId: testUser, amount: 200
2024-10-25 04:45:31.731 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Updating use points for userId: testUser, amount: 1500
2024-10-25 04:45:31.731 INFO  [pool-2-thread-1] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:45:31.762 ERROR [pool-2-thread-1] [i.h.concert.application.user.UserService] - User info not found for userId: testUser
2024-10-25 04:45:31.765 INFO  [Test worker] [i.h.concert.application.user.UserService] - Fetching user info for userId: testUser
2024-10-25 04:45:31.872 INFO  [SpringApplicationShutdownHook] [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-25 04:45:31.874 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2024-10-25 04:45:31.878 INFO  [SpringApplicationShutdownHook] [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
